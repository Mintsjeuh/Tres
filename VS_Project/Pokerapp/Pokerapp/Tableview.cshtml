@using WebMatrix.Data

@{
    string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True";
    string provider = "System.Data.SqlClient";
    Database db = Database.OpenConnectionString(connectionString, provider);

    string url = Request.Url.AbsolutePath;
    string urlcode = Convert.ToString(1111111); //url.Substring(url.Length - 7);

    int table = 1;  //Convert.ToInt32(Request["tablenumber"]);

    var namen = db.Query("SELECT Name FROM Players WHERE Room_Code = @0 AND Tbl_nr = @1", urlcode, table);
    int aantal = namen.Count();
    double gedeeld = aantal / 2;
    int helft = Convert.ToInt32(gedeeld);
    int eerste = Convert.ToInt32(aantal - helft);
    int tweede = Convert.ToInt32(eerste - 1);
    if (aantal % 2 == 0)
    {
        tweede = eerste;
    }


}

<html>
<head>
<title>Tableview</title>
</head>
<body>
    <h1>Table @table</h1>
    <br />
    <div>
    @foreach (var a in db.Query("SELECT TOP (@0) Name FROM Players WHERE Room_Code = @1 AND Tbl_nr = @2 ORDER BY Name ASC", eerste, urlcode, table))
    {
        @a.Name
    }
        </div><br />
    <div>
        <img src="~/tafel.png" name="pokertable" />
    </div>
    <br /><div>
    @foreach (var a in db.Query("SELECT TOP (@2) Name FROM Players WHERE Room_Code = @0 AND Tbl_nr = @1 ORDER BY Name DESC", urlcode, table, tweede))
    {
        @a.Name
    }
    </div>
    @*@foreach (var a in db.Query("SELECT Name FROM Players WHERE Room_Code = @0 AND Tbl_nr = @1", urlcode, table))
          {
              if (helft <= rij)
              {
                  <p>@a.Name</p>
                  rij++;
              }
          }
            </div>
        <div>
        @foreach (var a in db.Query("SELECT Name FROM Players WHERE Room_Code = @0 AND Tbl_nr = @1", urlcode, table))
        {
            if (helft == rij)
            {
                //<img src="" name="" />
                rij++;
            }
        }
            </div>
        <div>
        @foreach(var a in db.Query("SELECT Name FROM Players WHERE Room_Code = @0 AND Tbl_nr = @1", urlcode, table))
        {
            if(helft > rij)
            {
                <p>@a.Name</p>
                rij++;
            }
        }
            </div>*@
</body>
</html>